<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>CodeQL on Byebyedoggy</title>
        <link>https://byebydoggy.github.io/tags/codeql/</link>
        <description>Recent content in CodeQL on Byebyedoggy</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Fri, 21 Nov 2025 16:12:01 +0800</lastBuildDate><atom:link href="https://byebydoggy.github.io/tags/codeql/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>CodeQL 1</title>
        <link>https://byebydoggy.github.io/post/2025/codeql-1/</link>
        <pubDate>Fri, 21 Nov 2025 16:12:01 +0800</pubDate>
        
        <guid>https://byebydoggy.github.io/post/2025/codeql-1/</guid>
        <description>&lt;img src="https://byebydoggy.github.io/cover.png" alt="Featured image of post CodeQL 1" /&gt;&lt;h1 id=&#34;环境安装&#34;&gt;环境安装
&lt;/h1&gt;&lt;p&gt;CodeQL-Cli&lt;/p&gt;
&lt;p&gt;闭源&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/github/codeql-cli-binaries&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/github/codeql-cli-binaries&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;CodeQL&lt;/p&gt;
&lt;p&gt;开源规则库&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/github/codeql&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/github/codeql&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;环境变量设置&lt;/p&gt;
&lt;p&gt;设置为code-cli文件夹位置&lt;/p&gt;
&lt;p&gt;VSCode插件&lt;/p&gt;
&lt;p&gt;设置CodeQL-Cli的code.exe位置&lt;/p&gt;
&lt;h1 id=&#34;创建ql数据库&#34;&gt;创建QL数据库
&lt;/h1&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;codeql database create ./codeql-db &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;  --language&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;java &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;  --command&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;mvn clean compile&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;# 或 ./gradlew compileJava（Gradle 项目）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;编写ql规则&#34;&gt;编写QL规则
&lt;/h1&gt;&lt;p&gt;新建detect.ql文件&lt;/p&gt;
&lt;p&gt;示例内容&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; * 目标：检测代码中初始化 InvokerTransformer 的位置（CC 链核心组件）
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; */
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;import java
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;from int x, int y, int z
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;where x in &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;1..10&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; and y in &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;1..10&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; and z in &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;1..10&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt; and
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      x*x + y*y &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; z*z
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;select&lt;/span&gt; x, y, z
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;可能踩坑&#34;&gt;可能踩坑
&lt;/h1&gt;&lt;p&gt;需要创建qlback.yml配置文件&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;name&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;detect-invoker&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;version&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0.1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;dependencies&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;codeql/java-all&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;否则会报错Failed to run query: ERROR: could not resolve module java&lt;/p&gt;
&lt;h1 id=&#34;执行查询&#34;&gt;执行查询
&lt;/h1&gt;&lt;p&gt;可以在命令行执行&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;codeql query run --database=./cc6-db --search-path=E:\tools\CodeQL\codeql ./detect-invoker.ql
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;或者在VsCode插件中执行&lt;/p&gt;
&lt;h1 id=&#34;参考文档&#34;&gt;参考文档
&lt;/h1&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://codeql.github.com/docs&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://codeql.github.com/docs&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
