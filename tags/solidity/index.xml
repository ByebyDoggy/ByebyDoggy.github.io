<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Solidity on Byebyedoggy</title>
        <link>https://byebydoggy.github.io/tags/solidity/</link>
        <description>Recent content in Solidity on Byebyedoggy</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Sat, 20 Dec 2025 20:41:07 +0800</lastBuildDate><atom:link href="https://byebydoggy.github.io/tags/solidity/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>1220 DexodusFinance价格更新脆弱漏洞</title>
        <link>https://byebydoggy.github.io/post/2025/1220-dexodusfinance%E4%BB%B7%E6%A0%BC%E6%9B%B4%E6%96%B0%E8%84%86%E5%BC%B1%E6%BC%8F%E6%B4%9E/</link>
        <pubDate>Sat, 20 Dec 2025 20:41:07 +0800</pubDate>
        
        <guid>https://byebydoggy.github.io/post/2025/1220-dexodusfinance%E4%BB%B7%E6%A0%BC%E6%9B%B4%E6%96%B0%E8%84%86%E5%BC%B1%E6%BC%8F%E6%B4%9E/</guid>
        <description>&lt;img src="https://byebydoggy.github.io/cover.png" alt="Featured image of post 1220 DexodusFinance价格更新脆弱漏洞" /&gt;&lt;h1 id=&#34;基本信息&#34;&gt;基本信息
&lt;/h1&gt;&lt;p&gt;攻击日志:app.blocksec.com/explorer/tx/base/0x7501847c70d2cdcfbb8c6bd3585640f568cd287242b64027e5a829646e084257&lt;/p&gt;
&lt;p&gt;攻击路径:闪电贷-&amp;gt;Dex开多头仓位-&amp;gt;随后立即平仓，期间收益达到百分之5，300万本金，收益15万u。  据BlockSec所说，并参考LP池合约开源的代码，推测应该是依靠单一预言机故障，属于价格更新脆弱漏洞。&lt;/p&gt;
&lt;h1 id=&#34;漏洞合约&#34;&gt;漏洞合约
&lt;/h1&gt;&lt;p&gt;开发者已经删库跑路，看不到合约内容了。。。&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;&#34; &gt;https://github.com/DexodusGenesis/dexodus&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>1218 Abracadabra(MIM_SPELL) CauldronV4合约漏洞分析</title>
        <link>https://byebydoggy.github.io/post/2025/1218-abracadabramim_spell-cauldronv4%E5%90%88%E7%BA%A6%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/</link>
        <pubDate>Thu, 18 Dec 2025 18:22:21 +0800</pubDate>
        
        <guid>https://byebydoggy.github.io/post/2025/1218-abracadabramim_spell-cauldronv4%E5%90%88%E7%BA%A6%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/</guid>
        <description>&lt;img src="https://byebydoggy.github.io/cover.png" alt="Featured image of post 1218 Abracadabra(MIM_SPELL) CauldronV4合约漏洞分析" /&gt;&lt;h1 id=&#34;项目方&#34;&gt;项目方
&lt;/h1&gt;&lt;p&gt;x.com/MIM_Spell&lt;/p&gt;
&lt;h1 id=&#34;漏洞合约&#34;&gt;漏洞合约
&lt;/h1&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://dev.abracadabra.money/deployment-addresses/ethereum-mainnet&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://dev.abracadabra.money/deployment-addresses/ethereum-mainnet&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;其中Cauldrons V4的stdeusd合约具有漏洞&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-solidity&#34; data-lang=&#34;solidity&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;     &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_additionalCookAction&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt; action, CookStatus &lt;span style=&#34;color:#66d9ef&#34;&gt;memory&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt; value, &lt;span style=&#34;color:#66d9ef&#34;&gt;bytes&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;memory&lt;/span&gt; data, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt; value1, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt; value2) &lt;span style=&#34;color:#66d9ef&#34;&gt;internal&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;virtual&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;returns&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;bytes&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;memory&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt;, CookStatus &lt;span style=&#34;color:#66d9ef&#34;&gt;memory&lt;/span&gt;) {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cook&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt;[] calldata actions,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt;[] calldata values,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;bytes&lt;/span&gt;[] calldata datas
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ) &lt;span style=&#34;color:#66d9ef&#34;&gt;external&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;payable&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;returns&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt; value1, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt; value2) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        CookStatus &lt;span style=&#34;color:#66d9ef&#34;&gt;memory&lt;/span&gt; status;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; i &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; actions.length; i&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt; action &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; actions[i];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;status.hasAccrued &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; action &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                accrue();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                status.hasAccrued &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (action &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ACTION_ADD_COLLATERAL) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                (&lt;span style=&#34;color:#66d9ef&#34;&gt;int256&lt;/span&gt; share, &lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt; to, &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; skim) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; abi.decode(datas[i], (&lt;span style=&#34;color:#66d9ef&#34;&gt;int256&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                addCollateral(to, skim, _num(share, value1, value2));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (action &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ACTION_REPAY) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                (&lt;span style=&#34;color:#66d9ef&#34;&gt;int256&lt;/span&gt; part, &lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt; to, &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; skim) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; abi.decode(datas[i], (&lt;span style=&#34;color:#66d9ef&#34;&gt;int256&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                _repay(to, skim, _num(part, value1, value2));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (action &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ACTION_REMOVE_COLLATERAL) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                (&lt;span style=&#34;color:#66d9ef&#34;&gt;int256&lt;/span&gt; share, &lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt; to) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; abi.decode(datas[i], (&lt;span style=&#34;color:#66d9ef&#34;&gt;int256&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                _removeCollateral(to, _num(share, value1, value2));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                status.needsSolvencyCheck &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (action &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ACTION_BORROW) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                (&lt;span style=&#34;color:#66d9ef&#34;&gt;int256&lt;/span&gt; amount, &lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt; to) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; abi.decode(datas[i], (&lt;span style=&#34;color:#66d9ef&#34;&gt;int256&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                (value1, value2) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; _borrow(to, _num(amount, value1, value2));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                status.needsSolvencyCheck &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (action &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ACTION_UPDATE_EXCHANGE_RATE) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                (&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; must_update, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt; minRate, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt; maxRate) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; abi.decode(datas[i], (&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                (&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; updated, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt; rate) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; updateExchangeRate();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                require((&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;must_update &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; updated) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; rate &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; minRate &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; (maxRate &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; rate &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; maxRate), &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Cauldron: rate not ok&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (action &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ACTION_BENTO_SETAPPROVAL) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                (&lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt; user, &lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt; _masterContract, &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; approved, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt; v, &lt;span style=&#34;color:#66d9ef&#34;&gt;bytes32&lt;/span&gt; r, &lt;span style=&#34;color:#66d9ef&#34;&gt;bytes32&lt;/span&gt; s) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    abi.decode(datas[i], (&lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;bytes32&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;bytes32&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                bentoBox.setMasterContractApproval(user, _masterContract, approved, v, r, s);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (action &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ACTION_BENTO_DEPOSIT) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                (value1, value2) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; _bentoDeposit(datas[i], values[i], value1, value2);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (action &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ACTION_BENTO_WITHDRAW) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                (value1, value2) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; _bentoWithdraw(datas[i], value1, value2);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (action &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ACTION_BENTO_TRANSFER) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                (IERC20 token, &lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt; to, &lt;span style=&#34;color:#66d9ef&#34;&gt;int256&lt;/span&gt; share) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; abi.decode(datas[i], (IERC20, &lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;int256&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                bentoBox.transfer(token, msg.sender, to, _num(share, value1, value2));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (action &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ACTION_BENTO_TRANSFER_MULTIPLE) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                (IERC20 token, &lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt;[] &lt;span style=&#34;color:#66d9ef&#34;&gt;memory&lt;/span&gt; tos, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt;[] &lt;span style=&#34;color:#66d9ef&#34;&gt;memory&lt;/span&gt; shares) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; abi.decode(datas[i], (IERC20, &lt;span style=&#34;color:#66d9ef&#34;&gt;address&lt;/span&gt;[], &lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt;[]));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                bentoBox.transferMultiple(token, msg.sender, tos, shares);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (action &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ACTION_CALL) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                (&lt;span style=&#34;color:#66d9ef&#34;&gt;bytes&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;memory&lt;/span&gt; returnData, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt; returnValues) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; _call(values[i], datas[i], value1, value2);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (returnValues &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    (value1) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; abi.decode(returnData, (&lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (returnValues &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    (value1, value2) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; abi.decode(returnData, (&lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (action &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ACTION_GET_REPAY_SHARE) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;int256&lt;/span&gt; part &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; abi.decode(datas[i], (&lt;span style=&#34;color:#66d9ef&#34;&gt;int256&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                value1 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; bentoBox.toShare(magicInternetMoney, totalBorrow.toElastic(_num(part, value1, value2), &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;), &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (action &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ACTION_GET_REPAY_PART) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;int256&lt;/span&gt; amount &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; abi.decode(datas[i], (&lt;span style=&#34;color:#66d9ef&#34;&gt;int256&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                value1 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; totalBorrow.toBase(_num(amount, value1, value2), &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (action &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; ACTION_LIQUIDATE) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                _cookActionLiquidate(datas[i]);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                (&lt;span style=&#34;color:#66d9ef&#34;&gt;bytes&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;memory&lt;/span&gt; returnData, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt; returnValues, CookStatus &lt;span style=&#34;color:#66d9ef&#34;&gt;memory&lt;/span&gt; returnStatus) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; _additionalCookAction(action, status, values[i], datas[i], value1, value2);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                status &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; returnStatus;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (returnValues &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    (value1) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; abi.decode(returnData, (&lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (returnValues &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    (value1, value2) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; abi.decode(returnData, (&lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (status.needsSolvencyCheck) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            (, &lt;span style=&#34;color:#66d9ef&#34;&gt;uint256&lt;/span&gt; _exchangeRate) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; updateExchangeRate();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            require(_isSolvent(msg.sender, _exchangeRate), &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Cauldron: user insolvent&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;以上cook函数实现功能如下，输入一个actions列表，依次执行action，执行全部结束后检查调用者是否破产，若破产，reverte.&lt;/p&gt;
&lt;h1 id=&#34;问题&#34;&gt;问题
&lt;/h1&gt;&lt;p&gt;该版本Cauldron cook函数新增了else判断，使用了function_additionalCookAction以兼容后续更新,若调用者传入不存在的action时，走虚函数返回returnStatus为false，导致无需进行破产检查。因此可以输入actions=[Action.Borrow,任意不存在的action] 即可借出全部资产。&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
